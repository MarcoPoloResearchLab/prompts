<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prompt Bubbles — Curated ChatGPT Prompts</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#1976d2" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0d2247" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/materia/bootstrap.min.css" integrity="sha384-VBL1RyvoruUqGMPUNqtIIXcw1GvJClSiGRgG8jeIuaIXkjQsnjo8dY1ZFxfI6lkC" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" />
  <link rel="stylesheet" href="./assets/css/material.css" />
  <link rel="icon" type="image/svg+xml" href="./assets/img/favicon.svg" />
  <link rel="mask-icon" href="./assets/img/favicon.svg" color="#1976d2" />

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R6J165F21E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag("js", new Date());
    gtag("config", "G-R6J165F21E");
  </script>
</head>

<body>
  <div class="app-shell d-flex flex-column min-vh-100" x-data="AppShell()" x-init="init()" x-on:toast-show="forwardToast($event.detail)" x-cloak>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow-sm">
      <div class="container-fluid gap-3">
        <a class="navbar-brand fw-semibold" href="#top" x-text="strings.appTitle"></a>
        <form class="d-flex align-items-center flex-grow-1 gap-2" role="search">
          <div class="input-group">
            <span class="input-group-text d-inline-flex align-items-center gap-2" data-role="search-addon">
              <span class="material-icons-outlined" aria-hidden="true">search</span>
              <span class="visually-hidden" x-text="strings.searchIconLabel"></span>
            </span>
            <input
              id="searchInput"
              data-test="search-input"
              x-ref="searchInput"
              class="form-control"
              type="search"
              x-model.debounce.150ms="filters.searchText"
              x-bind:placeholder="strings.searchPlaceholder"
              x-bind:aria-label="strings.searchAriaLabel"
              autocomplete="off"
            />
            <button
              type="button"
              class="btn"
              id="clearSearch"
              data-role="search-clear"
              x-bind:aria-label="strings.clearSearchLabel"
              x-on:click.prevent="clearSearch"
            >
              ✕
            </button>
          </div>
        </form>
      </div>
    </nav>

    <main class="flex-fill">
      <div class="container py-5" style="padding-top: 6rem !important;">
        <header class="mb-4 text-center">
          <p class="lead mb-3" x-text="strings.subtitle"></p>
          <div class="d-flex flex-wrap justify-content-center gap-2" id="chipBar" role="group" x-bind:aria-label="strings.tagFilterLabel">
            <template x-for="tag in tags" :key="tag">
              <button
                type="button"
                class="btn btn-sm"
                data-test="tag-chip"
                x-bind:data-active="isActiveTag(tag) ? 'true' : 'false'"
                x-bind:class="isActiveTag(tag) ? 'btn-primary' : 'btn-outline-primary'"
                x-on:click="selectTag(tag)"
                x-text="chipLabel(tag)"
              ></button>
            </template>
          </div>
        </header>

        <template x-if="hasError">
          <div class="alert alert-danger" role="alert" x-text="strings.errorLoading"></div>
        </template>

        <template x-if="isLoading && !hasError">
          <div class="d-flex justify-content-center py-5">
            <div class="spinner-border text-primary" role="status" aria-hidden="true"></div>
          </div>
        </template>

        <template x-if="!isLoading && !hasError">
          <section class="row g-4" id="grid" x-ref="grid" role="list" aria-label="Prompt cards">
            <template x-if="filteredPrompts.length === 0">
              <div class="col-12">
                <div class="alert alert-secondary text-center" data-test="empty-state" x-text="emptyMessage()"></div>
              </div>
            </template>

            <template x-for="prompt in filteredPrompts" :key="prompt.id">
              <div class="col">
                <article
                  class="card h-100 shadow-sm"
                  x-bind:id="prompt.id"
                  data-test="prompt-card"
                  role="listitem"
                  tabindex="0"
                  x-on:keydown="handleCardKeydown($event)"
                >
                  <div class="card-body d-flex flex-column gap-3">
                    <div>
                      <h2 class="h5 card-title mb-1" x-text="prompt.title"></h2>
                      <div class="d-flex flex-wrap gap-2">
                        <template x-for="tag in prompt.tags" :key="`${prompt.id}-${tag}`">
                          <button
                            type="button"
                            class="badge border-0"
                            data-role="card-tag"
                            x-on:click="selectTag(tag)"
                            x-text="tag"
                          ></button>
                        </template>
                      </div>
                    </div>

                    <div
                      class="prompt-text border rounded p-3 bg-body-tertiary text-start"
                      data-role="prompt-text"
                      x-ref="text"
                      x-init="renderPromptText($el, prompt.text)"
                    ></div>

                    <div class="mt-auto d-flex flex-column gap-2">
                      <template x-if="cardFeedbackById[prompt.id]">
                        <p
                          class="small fw-semibold mb-0"
                          data-test="card-feedback"
                          role="status"
                          aria-live="polite"
                          x-bind:class="cardFeedbackClass(prompt.id)"
                          x-text="cardFeedbackById[prompt.id].message"
                          x-transition.opacity
                        ></p>
                      </template>
                      <div class="d-flex justify-content-between align-items-center gap-2">
                        <button
                          type="button"
                          class="btn btn-outline-primary btn-sm d-inline-flex align-items-center gap-1"
                          data-test="copy-button"
                          x-bind:aria-label="`${strings.copyAriaLabelPrefix} ${prompt.title}`"
                          x-on:click="copyCard($event)"
                        >
                          <span class="material-icons-outlined" aria-hidden="true" x-text="icon('copy')"></span>
                          <span x-text="strings.copyButtonLabel"></span>
                        </button>
                        <button
                          type="button"
                          class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center gap-1"
                          data-test="share-button"
                          x-bind:aria-label="`${strings.shareAriaLabelPrefix} ${prompt.title}`"
                          x-on:click="shareCard($event, prompt)"
                        >
                          <span class="material-icons-outlined" aria-hidden="true" x-text="icon('share')"></span>
                          <span x-text="strings.shareButtonLabel"></span>
                        </button>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
            </template>
          </section>
        </template>

        <p class="text-center text-muted mt-5" x-text="strings.footerHint"></p>
      </div>
    </main>

    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1080;" x-data="ToastRegion()" data-role="toast-region" x-on:toast-show-internal="handleShow($event.detail)" x-cloak>
      <div
        class="toast align-items-center text-bg-primary border-0"
        data-test="global-toast"
        role="status"
        x-show="isVisible"
        x-transition.opacity
      >
        <div class="d-flex">
          <div class="toast-body" x-text="message"></div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            x-bind:aria-label="$store.app.strings.toastDismiss"
            x-on:click="dismiss"
          ></button>
        </div>
      </div>
    </div>

    <nav class="navbar bg-body-tertiary border-top fixed-bottom shadow-sm">
      <div class="container-fluid justify-content-between align-items-center">
        <span class="small text-muted" x-text="strings.footerCta"></span>
        <div class="form-check form-switch mb-0 d-flex align-items-center gap-2" x-data="ThemeToggle()" x-init="init()">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="themeToggle"
            x-on:change="toggle()"
            x-bind:checked="mode === 'dark'"
            x-bind:aria-label="$store.app.strings.themeToggleLabel"
          />
          <label class="form-check-label" for="themeToggle" x-text="$store.app.strings.themeToggleLabel"></label>
        </div>
      </div>
    </nav>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
