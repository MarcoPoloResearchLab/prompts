<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prompt Bubbles — Curated ChatGPT Prompts</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg-a:#0b1016; --bg-b:#0f1620; --bg-c:#172230;
      --text-0:#eaf1fb; --text-1:#aab7cc;
      --brand:#6ee7ff; --brand-2:#b892ff;
      --chip:#131c28; --chip-text:#d9e6fb;
      --ring:#7ad1ff; --ok:#70ffa6;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg-a:#f8fbff; --bg-b:#eef4ff; --bg-c:#e8effb;
        --text-0:#0f1c2b; --text-1:#3a4f68;
        --chip:#e9f1ff; --chip-text:#0f1c2b;
        --ring:#2a83cf; --shadow:0 8px 24px rgba(0,40,80,.12);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial,Noto Sans,Apple Color Emoji,Segoe UI Emoji;
      color:var(--text-0);
      /* Smooth, non-tiled background */
      background: linear-gradient(130deg, var(--bg-a) 0%, var(--bg-b) 40%, var(--bg-c) 100%) fixed;
      position:relative;
    }
    /* Subtle vignette for depth, not blotches */
    body::before{
      content:"";
      position:fixed; inset:0; pointer-events:none;
      background: radial-gradient(1200px 800px at 50% -200px, rgba(255,255,255,.08), transparent 60%),
      radial-gradient(1200px 800px at 50% 120%, rgba(255,255,255,.04), transparent 60%);
      opacity:.5;
    }

    .shell{max-width:1200px; margin:0 auto; padding:18px clamp(16px,4vw,32px) 40px;}

    /* --- TOP SEARCH BAR --- */
    .topsearch{
      position:sticky; top:0; z-index:20;
      padding:14px 0;
      backdrop-filter:saturate(1.1) blur(8px);
      -webkit-backdrop-filter:saturate(1.1) blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,0));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .searchrow{ display:grid; grid-template-columns: 1fr auto; gap:12px; align-items:center; }
    .searchbox{ position:relative; }
    .searchbox input{
      width:100%;
      padding:18px 56px 18px 56px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color:var(--text-0);
      font-size:18px;
      outline:none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06), var(--shadow);
    }
    .searchbox input:focus{ outline:2px solid var(--ring); outline-offset:2px }
    .searchbox svg{ position:absolute; left:18px; top:50%; transform:translateY(-50%); width:22px; height:22px; opacity:.9; }
    .search-clear{ position:absolute; right:14px; top:50%; transform:translateY(-50%); border:0; background:transparent; color:var(--text-1); cursor:pointer; padding:8px; border-radius:10px; }
    .search-clear:hover{ color:var(--text-0) }

    /* --- TITLE + CHIPS --- */
    header{ padding:18px 0 6px; }
    .titlebar{ display:flex; align-items:center; gap:14px; flex-wrap:wrap; }
    .logo{ width:42px; height:42px; border-radius:12px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow:var(--shadow);
    }
    h1{ margin:0; font-size:clamp(22px,3.2vw,34px); font-weight:800; letter-spacing:.2px; }
    .subtitle{ margin:6px 0 0 56px; color:var(--text-1); font-size:14px; }

    .chips{ margin-top:14px; display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      border:1px solid rgba(255,255,255,.14);
      background:var(--chip); color:var(--chip-text);
      padding:8px 12px; border-radius:999px; font-size:13px; cursor:pointer; user-select:none; transition:transform .06s ease;
    }
    .chip[data-active="true"]{
      background: linear-gradient(135deg, color-mix(in oklab, var(--brand) 65%, transparent), color-mix(in oklab, var(--brand-2) 65%, transparent));
      color:#061018; border-color:transparent;
    }
    .chip:active{ transform:scale(.98) }

    main{ margin-top:16px }
    .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px; }

    .card{
      position:relative; display:flex; flex-direction:column; gap:12px;
      border-radius:22px; padding:16px 16px 52px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.12); box-shadow:var(--shadow); overflow:hidden; isolation:isolate;
    }
    .card:hover{ transform:translateY(-1px) }
    .card:focus-within{ outline:2px solid var(--ring) }

    .card-header{ display:flex; align-items:center; gap:10px; }
    .tag-dot{ width:10px; height:10px; border-radius:50%; background: radial-gradient(circle at 30% 30%, var(--brand), var(--brand-2)); box-shadow:0 0 0 3px color-mix(in lab, var(--brand) 20%, transparent); }
    .card-title{ margin:0; font-size:15px; font-weight:700; letter-spacing:.2px; }
    .card-tags{ display:flex; flex-wrap:wrap; gap:6px; margin-top:-2px; }
    .tag{ font-size:11px; padding:4px 8px; border-radius:999px; background:color-mix(in lab, var(--brand) 14%, transparent); color:color-mix(in lab, var(--text-0) 85%, var(--brand)); border:1px dashed color-mix(in lab, var(--brand-2) 40%, transparent); cursor:pointer; user-select:none; }
    .card-text{ white-space:pre-wrap; font-size:14px; color:var(--text-0); }
    .placeholder-input{ display:inline-block; padding:0 2px; border:0; border-bottom:1px dashed var(--brand); background:transparent; color:var(--brand); font:inherit; }
    .placeholder-input:focus{ outline:none; border-bottom-color:var(--ring); }

    .card-actions{ position:absolute; right:10px; bottom:10px; display:flex; gap:8px; }
    .btn{ display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(255,255,255,.16); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); padding:8px 12px; border-radius:12px; cursor:pointer; user-select:none; color:var(--text-0); }
    .btn:hover{ border-color: color-mix(in lab, var(--brand) 40%, transparent) }
    .btn:active{ transform: translateY(1px) }
    .btn svg{ width:18px; height:18px }

    .copied{ position:absolute; left:12px; bottom:10px; font-size:12px; padding:6px 10px; border-radius:10px; background: color-mix(in lab, var(--ok) 20%, var(--bg-c)); color: color-mix(in lab, var(--text-0) 60%, var(--ok)); border: 1px solid color-mix(in lab, var(--ok) 35%, transparent); opacity:0; transform: translateY(6px); transition:all .18s ease; pointer-events:none; }
    .copied[data-show="true"]{ opacity:1; transform:translateY(0) }

    .footer{ margin-top:26px; color:var(--text-1); font-size:12px; text-align:center; }

    @media (prefers-reduced-motion: reduce){ *{transition:none !important; animation:none !important} }
  </style>
</head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R6J165F21E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-R6J165F21E');
</script>

<body>
<div class="shell">
  <!-- Top search row -->
  <div class="topsearch">
    <div class="searchrow" role="region" aria-label="Search">
      <div class="searchbox">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 0 0 1.57-4.23C15.99 6.01 13.48 3.5 10.49 3.5S5 6.01 5 9s2.51 5.5 5.5 5.5a6.47 6.47 0 0 0 4.23-1.57l.27.28v.79L20 20.49 21.49 19 15.5 14Zm-5 0C8.01 14 6 11.99 6 9.5S8.01 5 10.5 5 15 7.01 15 9.5 12.99 14 10.5 14Z"/></svg>
        <input id="searchInput" type="search" placeholder="Search prompts (title, text, tags)..." autocomplete="off" aria-label="Search prompts" />
        <button class="search-clear" id="clearSearch" title="Clear search" aria-label="Clear search">✕</button>
      </div>
    </div>
  </div>

  <header>
    <div class="titlebar" aria-label="Site header">
      <div class="logo" aria-hidden="true"></div>
      <h1>Prompt Bubbles</h1>
    </div>
    <p class="subtitle">A visually stunning, zero-backend gallery of copy-ready prompts.</p>
    <div class="chips" id="chipBar" aria-label="Tag filters"></div>
  </header>

  <main>
    <section class="grid" id="grid" role="list" aria-label="Prompt cards"></section>
    <p class="footer">Tip: Press <strong>/</strong> to jump to search • Press <strong>Enter</strong> on a focused card to copy</p>
  </main>
</div>

<script>
  let PROMPTS = [];
  const PROMPTS_PATH = "prompts.json";
  /** loadPrompts retrieves prompt data from a JSON file and assigns it to the global list */
  async function loadPrompts(){
    const response = await fetch(PROMPTS_PATH);
    const promptData = await response.json();
    PROMPTS = promptData;
  }

  // ====== STATE ======
  const state = { search:"", tag:"all" };

  const CLICK_EVENT = "click";
  const INPUT_EVENT = "input";
  const KEYDOWN_EVENT = "keydown";
  const TAG_CLASS = "tag";
  const SPAN_ELEMENT = "span";
  const DOM_CONTENT_LOADED_EVENT = "DOMContentLoaded";
  /** placeholder constants for text inputs */
  const PLACEHOLDER_PATTERN = /\{([^}]+)\}/g;
  const PLACEHOLDER_ATTRIBUTE = "data-placeholder";
  const PLACEHOLDER_CLASS = "placeholder-input";
  const INPUT_ELEMENT = "input";
  const PLACEHOLDER_SELECTOR = INPUT_ELEMENT+"["+PLACEHOLDER_ATTRIBUTE+"]";

  // ====== HELPERS ======
  const $ = (s, r=document)=>r.querySelector(s);
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
  const debounce=(fn,ms=120)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),ms)}};
  const sanitize=(s)=>s.replace(/\r/g,'');
  const matches=(item,q,tag)=>{
    const tagOk = tag==="all" || item.tags.includes(tag);
    if(!q) return tagOk;
    const hay=(item.title+" "+item.text+" "+item.tags.join(" ")).toLowerCase();
    return tagOk && q.split(/\s+/).every(tok=>hay.includes(tok));
  };

  /** renderPromptContent builds DOM nodes for prompt text and placeholders */
  function renderPromptContent(rawText){
    PLACEHOLDER_PATTERN.lastIndex=0;
    const fragment=document.createDocumentFragment();
    let cursorIndex=0; let matchResult;
    while((matchResult=PLACEHOLDER_PATTERN.exec(rawText))!==null){
      const precedingSegment=rawText.slice(cursorIndex, matchResult.index);
      if(precedingSegment) fragment.appendChild(document.createTextNode(precedingSegment));
      const placeholderName=matchResult[1];
      const placeholderInput=document.createElement(INPUT_ELEMENT);
      placeholderInput.className=PLACEHOLDER_CLASS;
      placeholderInput.setAttribute(PLACEHOLDER_ATTRIBUTE, placeholderName);
      placeholderInput.placeholder=placeholderName;
      placeholderInput.style.width=`${placeholderName.length}ch`;
      fragment.appendChild(placeholderInput);
      cursorIndex=PLACEHOLDER_PATTERN.lastIndex;
    }
    const trailingSegment=rawText.slice(cursorIndex);
    if(trailingSegment) fragment.appendChild(document.createTextNode(trailingSegment));
    return fragment;
  }

  /** resolvePlaceholders creates the final text for copying */
  function resolvePlaceholders(textElement){
    const clone=textElement.cloneNode(true);
    $$(PLACEHOLDER_SELECTOR, clone).forEach(inputElement=>{
      const placeholderName=inputElement.getAttribute(PLACEHOLDER_ATTRIBUTE);
      const userValue=inputElement.value || placeholderName;
      inputElement.replaceWith(userValue);
    });
    return clone.textContent;
  }

  // ====== RENDERING ======
  function uniqueTags(){
    const t=new Set(); PROMPTS.forEach(p=>p.tags.forEach(tag=>t.add(tag)));
    return ["all",...Array.from(t).sort((a,b)=>a.localeCompare(b))];
  }
  // renderChips shows filter chips for all unique tags.
  function renderChips(){
    const bar=$("#chipBar"); bar.innerHTML="";
    uniqueTags().forEach(tagName=>{
      const chip=document.createElement("button");
      chip.className="chip"; chip.type="button"; chip.textContent=tagName;
      chip.setAttribute("data-active", tagName===state.tag ? "true":"false");
      chip.onclick=()=>selectTag(tagName);
      bar.appendChild(chip);
    });
  }
  function highlightActiveChip(){ $$("#chipBar .chip").forEach(c=>c.setAttribute("data-active", String(c.textContent===state.tag))); }

  // selectTag updates the selected tag and refreshes the grid and chip states.
  function selectTag(tagName){
    state.tag=tagName;
    persist();
    renderGrid();
    highlightActiveChip();
  }

  function renderGrid(){
    const grid=$("#grid"); const q=state.search.trim().toLowerCase();
    const items=PROMPTS.filter(p=>matches(p,q,state.tag));
    grid.innerHTML="";
    items.forEach(item=>grid.appendChild(createCard(item)));
    if(items.length===0){ const p=document.createElement("p"); p.style.color="var(--text-1)"; p.style.gridColumn="1/-1"; p.textContent="No prompts match your search/filter."; grid.appendChild(p); }
  }

  // createCard builds a card for a prompt, wiring tag selection.
  function createCard(item){
    const card=document.createElement("article"); card.className="card"; card.setAttribute("role","listitem"); card.tabIndex=0;

    const header=document.createElement("div"); header.className="card-header";
    header.innerHTML=`<span class="tag-dot" aria-hidden="true"></span><h3 class="card-title">${escapeHTML(item.title)}</h3>`;
    card.appendChild(header);

    const tags=document.createElement("div"); tags.className="card-tags";
    item.tags.forEach(tagName=>{
      const tagElement=document.createElement(SPAN_ELEMENT);
      tagElement.className=TAG_CLASS;
      tagElement.textContent=tagName;
      tagElement.addEventListener(CLICK_EVENT,()=>selectTag(tagName));
      tags.appendChild(tagElement);
    });
    card.appendChild(tags);

    const text=document.createElement("pre");
    text.className="card-text";
    text.appendChild(renderPromptContent(item.text));
    card.appendChild(text);

    const actions=document.createElement("div"); actions.className="card-actions";
    const btn=document.createElement("button"); btn.className="btn"; btn.type="button"; btn.setAttribute("aria-label",`Copy prompt: ${item.title}`);
    btn.innerHTML=copyIcon()+`<span>Copy</span>`; btn.onclick=()=>copyPrompt(card);
    actions.appendChild(btn); card.appendChild(actions);

    const toast=document.createElement("div"); toast.className="copied"; toast.textContent="Copied ✓"; card.appendChild(toast);

    card.addEventListener("keydown",(e)=>{ if(e.key==="Enter"){ e.preventDefault(); copyPrompt(card); }});
    return card;
  }

  /** copyPrompt writes the card text with filled placeholders to the clipboard */
  function copyPrompt(card){
    const textElement=$(".card-text",card);
    const content=resolvePlaceholders(textElement).trim();
    navigator.clipboard.writeText(sanitize(content)).then(()=>{
      const toast=$(".copied",card); toast.setAttribute("data-show","true"); setTimeout(()=>toast.setAttribute("data-show","false"),1200);
    }).catch(()=>{
      const fallback=document.createElement("textarea");
      fallback.value=content;
      fallback.style.position="fixed";
      fallback.style.left="-9999px";
      document.body.appendChild(fallback);
      fallback.select();
      document.execCommand("copy");
      fallback.remove();
    });
  }
  function copyIcon(){ return `<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>`; }
  function escapeHTML(s){ return s.replace(/[&<>"']/g,ch=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch])); }

  // ====== SEARCH + PERSIST ======
  const onSearch = debounce((v)=>{ state.search=v; persist(); renderGrid(); },80);
  function persist(){ try{ localStorage.setItem("prompt-bubbles-state", JSON.stringify(state)); }catch{} }
  function restore(){ try{ const raw=localStorage.getItem("prompt-bubbles-state"); if(raw){ const p=JSON.parse(raw); if(typeof p.search==="string") state.search=p.search; if(typeof p.tag==="string") state.tag=p.tag; } }catch{} }

  /** init loads prompts and wires search interactions */
  async function init(){
    await loadPrompts();
    restore();
    renderChips();
    renderGrid();
    const searchInputElement=$("#searchInput"), clearSearchButton=$("#clearSearch");
    searchInputElement.value=state.search;
    searchInputElement.addEventListener(INPUT_EVENT, event=>onSearch(event.target.value));
    clearSearchButton.addEventListener(CLICK_EVENT,()=>{ searchInputElement.value=""; searchInputElement.focus(); onSearch(""); });
    window.addEventListener(KEYDOWN_EVENT, event=>{ if(event.key==="/" && document.activeElement!==searchInputElement){ event.preventDefault(); searchInputElement.focus(); searchInputElement.select(); }});
  }
  document.addEventListener(DOM_CONTENT_LOADED_EVENT, init);
</script>
</body>
</html>
