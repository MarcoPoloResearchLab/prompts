# TAuth Configuration for Prompt Bubbles
#
# This file configures the TAuth authentication service for local development.
# Environment variables are expanded at runtime using ${VAR} syntax.
#
# Required environment variables (set in .env.tauth):
#   - TAUTH_LISTEN_ADDR: Server listen address (default: :8081)
#   - TAUTH_DATABASE_URL: Database connection string
#   - GOOGLE_WEB_CLIENT_ID: Google OAuth client ID
#   - TAUTH_JWT_SIGNING_KEY: Secret key for signing JWTs
#   - TAUTH_COOKIE_DOMAIN: Cookie domain (empty for localhost)

server:
  listen_addr: "${TAUTH_LISTEN_ADDR}"
  database_url: "${TAUTH_DATABASE_URL}"
  enable_cors: "${TAUTH_ENABLE_CORS}"
  cors_allowed_origins:
    - ${TAUTH_CORS_ORIGIN_1}
    - ${TAUTH_CORS_ORIGIN_2}
    - ${TAUTH_CORS_ORIGIN_3}
  enable_tenant_header_override: true

tenants:
  - id: "prompt-bubbles"
    display_name: "Prompt Bubbles"
    tenant_origins:
      - ${TAUTH_CORS_ORIGIN_1}
      - ${TAUTH_CORS_ORIGIN_2}
      - ${TAUTH_CORS_ORIGIN_3}
    google_web_client_id: "${GOOGLE_WEB_CLIENT_ID}"
    jwt_signing_key: "${TAUTH_JWT_SIGNING_KEY}"
    cookie_domain: "${TAUTH_COOKIE_DOMAIN}"
    session_cookie_name: "pb_session"
    refresh_cookie_name: "pb_refresh"
    session_ttl: "30m"
    refresh_ttl: "720h"
    nonce_ttl: "10m"
    allow_insecure_http: "${TAUTH_ALLOW_INSECURE_HTTP}"
